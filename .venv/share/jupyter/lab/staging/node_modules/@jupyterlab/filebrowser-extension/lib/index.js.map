{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../filebrowser-extension/src/index.ts"],"names":[],"mappings":";AAAA,0CAA0C;AAC1C,2DAA2D;;AAE3D,yDAKiC;AAEjC,mDAK8B;AAE9B,qDAA8E;AAE9E,uDAA0D;AAI1D,yDAIiC;AAMjC,mDAAmD;AAInD,+CAAyC;AAEzC;;GAEG;AACH,IAAU,UAAU,CAuCnB;AAvCD,WAAU,UAAU;IACL,eAAI,GAAG,kBAAkB,CAAC;IAEvC,yBAAyB;IACZ,yBAAc,GAAG,kCAAkC,CAAC;IAEpD,cAAG,GAAG,iBAAiB,CAAC;IAExB,cAAG,GAAG,oBAAoB,CAAC;IAE3B,mBAAQ,GAAG,sBAAsB,CAAC;IAElC,oBAAS,GAAG,uBAAuB,CAAC;IAEjD,yBAAyB;IACZ,sBAAW,GAAG,uBAAuB,CAAC;IAEtC,mBAAQ,GAAG,sBAAsB,CAAC;IAElC,eAAI,GAAG,kBAAkB,CAAC;IAE1B,yBAAc,GAAG,8BAA8B,CAAC;IAEhD,gBAAK,GAAG,mBAAmB,CAAC;IAE5B,iBAAM,GAAG,oBAAoB,CAAC;IAE3C,yBAAyB;IACZ,gBAAK,GAAG,wBAAwB,CAAC;IAE9C,yBAAyB;IACZ,mBAAQ,GAAG,uBAAuB,CAAC;IAEnC,sBAAW,GAAG,sBAAsB,CAAC;IAErC,mBAAQ,GAAG,sBAAsB,CAAC;IAE/C,yBAAyB;IACZ,wBAAa,GAAG,yBAAyB,CAAC;AACzD,CAAC,EAvCS,UAAU,KAAV,UAAU,QAuCnB;AAED;;GAEG;AACH,MAAM,OAAO,GAA2B;IACtC,QAAQ,EAAE,eAAe;IACzB,EAAE,EAAE,2CAA2C;IAC/C,QAAQ,EAAE,CAAC,iCAAmB,EAAE,6BAAe,CAAC;IAChD,SAAS,EAAE,IAAI;CAChB,CAAC;AAEF;;GAEG;AACH,MAAM,OAAO,GAA0C;IACrD,QAAQ,EAAE,eAAe;IACzB,EAAE,EAAE,2CAA2C;IAC/C,QAAQ,EAAE,iCAAmB;IAC7B,QAAQ,EAAE,CAAC,6BAAgB,EAAE,oBAAQ,CAAC;CACvC,CAAC;AAEF;;GAEG;AACH,MAAM,SAAS,GAAG,aAAa,CAAC;AAEhC;;GAEG;AACH,MAAM,OAAO,GAA4B,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AAC5D,kBAAe,OAAO,CAAC;AAEvB;;GAEG;AACH,yBACE,GAAe,EACf,UAA4B,EAC5B,KAAe;IAEf,MAAM,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC;IACzB,MAAM,OAAO,GAAG,IAAI,0BAAe,CAAc,EAAE,SAAS,EAAE,CAAC,CAAC;IAChE,MAAM,iBAAiB,GAAG,CACxB,EAAU,EACV,UAAwC,EAAE,EAC1C,EAAE;QACF,MAAM,KAAK,GAAG,IAAI,8BAAgB,CAAC;YACjC,OAAO,EAAE,UAAU;YACnB,SAAS,EAAE,OAAO,CAAC,SAAS,IAAI,EAAE;YAClC,KAAK,EAAE,OAAO,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,IAAI,KAAK;SAC9D,CAAC,CAAC;QACH,MAAM,MAAM,GAAG,IAAI,yBAAW,CAAC;YAC7B,EAAE;YACF,KAAK;YACL,QAAQ,EAAE,OAAO,CAAC,QAAQ,IAAI,QAAQ;SACvC,CAAC,CAAC;QACH,MAAM,EAAE,QAAQ,EAAE,GAAG,UAAU,CAAC;QAEhC,+BAA+B;QAC/B,IAAI,QAAQ,GAAG,IAAI,wBAAa,CAAC;YAC/B,SAAS,EAAE,YAAY;YACvB,OAAO,EAAE,GAAG,EAAE;gBACZ,OAAO,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;YAC1C,CAAC;YACD,OAAO,EAAE,cAAc;SACxB,CAAC,CAAC;QACH,QAAQ,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;QACrC,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;QAEjD,sEAAsE;QACtE,IAAI,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,uBAAuB,CAAC,CAAC,CAAC,CAAC,CAAC;QAC1E,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,KAAiB,EAAE,EAAE;YACzD,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,MAAM,KAAK,GAAG,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC1C,MAAM,IAAI,GAAG,iBAAiB,CAAC,KAAK,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;YAC1D,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC;QAC1C,CAAC,CAAC,CAAC;QAEH,wCAAwC;QACxC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;QAEpB,OAAO,MAAM,CAAC;IAChB,CAAC,CAAC;IACF,MAAM,cAAc,GAAG,iBAAiB,CAAC,aAAa,CAAC,CAAC;IAExD,OAAO,EAAE,iBAAiB,EAAE,cAAc,EAAE,OAAO,EAAE,CAAC;AACxD,CAAC;AAED;;GAEG;AACH,yBACE,GAAe,EACf,OAA4B,EAC5B,QAAyB;IAEzB,MAAM,OAAO,GAAG,OAAO,CAAC,cAAc,CAAC;IACvC,MAAM,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,GAAG,CAAC;IAEhC,uEAAuE;IACvE,4EAA4E;IAC5E,oDAAoD;IACpD,EAAE;IACF,oEAAoE;IACpE,0DAA0D;IAC1D,QAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;IAEjC,WAAW,CAAC,GAAG,EAAE,OAAO,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAE3C,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;IAC9B,KAAK,CAAC,aAAa,CAAC,OAAO,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAAC;IAE5C,0EAA0E;IAC1E,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,EAAE;QACzB,IAAI,MAAM,CAAC,KAAK,EAAE;YAChB,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;SAClD;IACH,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE;QAC5D;YACE,gDAAgD;YAChD,IAAI,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;gBAC7B,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;aACnC;QACH,CAAC;QAED,yEAAyE;QACzE,KAAK,CAAC,cAAc,CAAC,OAAO,CAAC,GAAG,EAAE;YAChC,WAAW,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;QACH,WAAW,EAAE,CAAC;IAChB,CAAC,CAAC,CAAC;AACL,CAAC;AAED;;GAEG;AACH,qBACE,GAAe,EACf,OAAqC,EACrC,OAAoB;IAEpB,MAAM,iBAAiB,GAAG,CAAC,IAAY,EAAe,EAAE;QACtD,MAAM,SAAS,GAAG,GAAG,CAAC,cAAc,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAE9D,IAAI,SAAS,EAAE;YACb,IAAI,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC;YAE1E,IAAI,CAAC,cAAc,EAAE;gBACnB,6DAA6D;gBAC7D,OAAO,CAAC,IAAI,CACV,GAAG,UAAU,CAAC,QAAQ,yCAAyC,IAAI,EAAE,CACtE,CAAC;gBACF,OAAO;aACR;YAED,OAAO,cAAc,CAAC;SACvB;QAED,qDAAqD;QACrD,OAAO,OAAO,CAAC;IACjB,CAAC,CAAC;IACF,MAAM,EAAE,QAAQ,EAAE,GAAG,GAAG,CAAC;IAEzB,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,EAAE;QAClC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,MAAM,EAAE,CAAC;aACxB;QACH,CAAC;QACD,SAAS,EAAE,8BAA8B;QACzC,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,EAAE;QACnC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,IAAI,EAAE,CAAC;aACtB;QACH,CAAC;QACD,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,MAAM;QACb,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,GAAG,EAAE;QAClC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,GAAG,EAAE,CAAC;aACrB;QACH,CAAC;QACD,SAAS,EAAE,4BAA4B;QACvC,KAAK,EAAE,KAAK;KACb,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE;QACvC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,QAAQ,EAAE,CAAC;aAC1B;QACH,CAAC;QACD,SAAS,EAAE,iCAAiC;QAC5C,KAAK,EAAE,UAAU;KAClB,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,SAAS,EAAE;QACxC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,SAAS,EAAE,CAAC;aAC3B;QACH,CAAC;QACD,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,WAAW;KACnB,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,WAAW,EAAE;QAC1C,OAAO,EAAE,GAAG,EAAE;YACZ,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;gBACrB,GAAG,CAAC,KAAK,CAAC,YAAY,EAAE,CAAC;aAC1B;QACH,CAAC;KACF,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE;QACvC,OAAO,EAAE,IAAI,CAAC,EAAE;YACd,MAAM,IAAI,GAAI,IAAI,CAAC,IAAe,IAAI,EAAE,CAAC;YACzC,MAAM,cAAc,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAC/C,MAAM,QAAQ,GAAG,GAAG,CAAC,cAAc,CAAC;YACpC,MAAM,SAAS,GAAG,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;YACpD,MAAM,OAAO,GAAG,CAAC,MAAW,EAAE,EAAE;gBAC9B,OAAO,CAAC,IAAI,CAAC,GAAG,UAAU,CAAC,QAAQ,oBAAoB,IAAI,EAAE,EAAE,MAAM,CAAC,CAAC;YACzE,CAAC,CAAC;YAEF,OAAO,QAAQ,CAAC,KAAK;iBAClB,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iBACvC,IAAI,CAAC,KAAK,CAAC,EAAE;gBACZ,MAAM,EAAE,KAAK,EAAE,GAAG,cAAc,CAAC;gBACjC,MAAM,EAAE,QAAQ,EAAE,GAAG,KAAK,CAAC;gBAE3B,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;oBAC9B,OAAO,QAAQ,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,SAAS,EAAE,CAAC,CAAC,CAAC;iBACvD;gBAED,OAAO,QAAQ;qBACZ,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,mBAAO,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;qBACtD,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;YACrE,CAAC,CAAC;iBACD,KAAK,CAAC,OAAO,CAAC,CAAC;QACpB,CAAC;KACF,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,EAAE;QACnC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YAED,OAAO,OAAO,CAAC,GAAG,CAChB,mBAAO,CACL,eAAG,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,EAAE;gBACjC,IAAI,IAAI,CAAC,IAAI,KAAK,WAAW,EAAE;oBAC7B,OAAO,MAAM,CAAC,KAAK,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACnC;gBAED,OAAO,QAAQ,CAAC,OAAO,CAAC,iBAAiB,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC;YAClE,CAAC,CAAC,CACH,CACF,CAAC;QACJ,CAAC;QACD,SAAS,EAAE,mCAAmC;QAC9C,KAAK,EAAE,MAAM;QACb,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,EAAE;QAC7C,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,CAAC,MAAM,EAAE;gBACX,OAAO;aACR;YAED,OAAO,OAAO,CAAC,GAAG,CAChB,mBAAO,CACL,eAAG,CAAC,MAAM,CAAC,aAAa,EAAE,EAAE,IAAI,CAAC,EAAE;gBACjC,OAAO,QAAQ,CAAC,OAAO,CAAC,6BAA6B,EAAE;oBACrD,IAAI,EAAE,IAAI,CAAC,IAAI;iBAChB,CAAC,CAAC;YACL,CAAC,CAAC,CACH,CACF,CAAC;QACJ,CAAC;QACD,SAAS,EAAE,4BAA4B;QACvC,KAAK,EAAE,yBAAyB;QAChC,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE;QACpC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,KAAK,EAAE,CAAC;aACvB;QACH,CAAC;QACD,SAAS,EAAE,8BAA8B;QACzC,KAAK,EAAE,OAAO;QACd,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,EAAE;QACrC,OAAO,EAAE,IAAI,CAAC,EAAE;YACd,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,MAAM,EAAE,CAAC;aACxB;QACH,CAAC;QACD,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,QAAQ;QACf,QAAQ,EAAE,CAAC;KACZ,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,EAAE;QACpC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,IAAI,GAAG,kBAAkB,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,CAAC,IAAI,CAAC,CAAC;YACrE,MAAM,IAAI,GAAG,sBAAU,CAAC,UAAU,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,CAAC;YAExD,oBAAS,CAAC,YAAY,CAAC,kBAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QAClD,CAAC;QACD,SAAS,EAAE,GAAG,EAAE,CAAC,mBAAO,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC;QAC9D,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,qBAAqB;KAC7B,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE;QACvC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,IAAI,GAAG,OAAO,CAAC,aAAa,EAAE,CAAC,IAAI,EAAE,CAAC;YAC5C,IAAI,CAAC,IAAI,EAAE;gBACT,OAAO;aACR;YAED,oBAAS,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACpC,CAAC;QACD,SAAS,EAAE,GAAG,EAAE,CAAC,mBAAO,CAAC,OAAO,CAAC,aAAa,EAAE,CAAC,CAAC,MAAM,KAAK,CAAC;QAC9D,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,WAAW;KACnB,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,WAAW,EAAE;QAC1C,OAAO,EAAE,IAAI,CAAC,EAAE;YACd,MAAM,IAAI,GAAI,IAAI,CAAC,IAAe,IAAI,EAAE,CAAC;YACzC,MAAM,cAAc,GAAG,iBAAiB,CAAC,IAAI,CAAC,CAAC;YAE/C,8BAA8B;YAC9B,IAAI,CAAC,cAAc,EAAE;gBACnB,OAAO;aACR;YACD,iDAAiD;YACjD,IAAI,OAAO,KAAK,cAAc,EAAE;gBAC9B,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC;gBACnC,OAAO;aACR;iBAAM;gBACL,MAAM,KAAK,GAA4B,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;gBACzD,KAAK,IAAI,IAAI,IAAI,KAAK,EAAE;oBACtB,MAAM,EAAE,GAAG,GAAG,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;oBACnC,IAAI,MAAM,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;oBACvB,OAAO,MAAM,EAAE;wBACb,IAAI,MAAM,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE;4BACnC,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;4BAClC,OAAO;yBACR;wBACD,MAAM,GAAG,EAAE,CAAC,IAAI,EAAE,CAAC;qBACpB;iBACF;aACF;QACH,CAAC;KACF,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,QAAQ,EAAE;QACvC,OAAO,EAAE,GAAG,EAAE;YACZ,MAAM,MAAM,GAAG,OAAO,CAAC,aAAa,CAAC;YAErC,IAAI,MAAM,EAAE;gBACV,OAAO,MAAM,CAAC,eAAe,EAAE,CAAC;aACjC;QACH,CAAC;QACD,SAAS,EAAE,6BAA6B;QACxC,KAAK,EAAE,iBAAiB;KACzB,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,aAAa,EAAE;QAC5C,OAAO,EAAE,GAAG,EAAE;YACZ,IAAI,OAAO,CAAC,QAAQ,EAAE;gBACpB,OAAO,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;aACzD;YAED,OAAO,QAAQ,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC;QAC1D,CAAC;KACF,CAAC,CAAC;IAEH,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,cAAc,EAAE;QAC7C,KAAK,EAAE,cAAc;QACrB,OAAO,EAAE,GAAG,EAAE,CAAC,cAAc,CAAC,QAAQ,EAAE,OAAO,CAAC;KACjD,CAAC,CAAC;AACL,CAAC;AAED;;;;;;GAMG;AACH,2BACE,KAAkC,EAClC,QAAyB,EACzB,QAA0B;IAE1B,MAAM,IAAI,GAAG,IAAI,cAAI,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;IAEpC,+DAA+D;IAC/D,0BAA0B;IAC1B,IAAI,CAAC,KAAK,EAAE;QACV,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC;QAC5C,OAAO,IAAI,CAAC;KACb;IAED,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;IAE3C,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC;IACxB,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;QAC9B,MAAM,SAAS,GAAG,QAAQ,CAAC,wBAAwB,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC3E,IAAI,IAAI,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAChC,MAAM,OAAO,GAAG,iBAAiB,CAAC;YAClC,MAAM,QAAQ,GAAG,IAAI,cAAI,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC;YACxC,QAAQ,CAAC,KAAK,CAAC,KAAK,GAAG,WAAW,CAAC;YACnC,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,EAAE;gBAC1B,QAAQ,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE,OAAO,EAAE,CAAC,CAAC;YACzD,CAAC,CAAC,CAAC;YACH,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,SAAS,EAAE,OAAO,EAAE,QAAQ,EAAE,CAAC,CAAC;SACtD;QACD,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,cAAc,EAAE,CAAC,CAAC;KACtD;IAED,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;IAC7C,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;IAC1C,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,GAAG,EAAE,CAAC,CAAC;IAE1C,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;QAC9B,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,IAAI,EAAE,CAAC,CAAC;KAC5C;IAED,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC;IAE5C,IAAI,KAAK,CAAC,IAAI,KAAK,WAAW,EAAE;QAC9B,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,SAAS,EAAE,CAAC,CAAC;QAChD,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;QAC/C,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;KAChD;IAED,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,KAAK,EAAE,CAAC,CAAC;IAC5C,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,CAAC,QAAQ,EAAE,CAAC,CAAC;IAE/C,OAAO,IAAI,CAAC;AACd,CAAC;AAED;;GAEG;AACH,wBACE,QAAyB,EACzB,OAAoB;IAEpB,MAAM,EAAE,KAAK,EAAE,GAAG,OAAO,CAAC;IAE1B,OAAO,QAAQ;SACZ,OAAO,CAAC,iBAAiB,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,CAAC;SAC/C,IAAI,CAAC,CAAC,QAAkC,EAAE,EAAE;QAC3C,KAAK,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,EAAE;YAC7B,QAAQ,CAAC,OAAO,CAAC,GAAG,GAAG,KAAK,CAAC,IAAI,CAAC;QACpC,CAAC,EAAE,QAAQ,CAAC,CAAC;QACb,OAAO,QAAQ,CAAC;IAClB,CAAC,CAAC,CAAC;AACP,CAAC","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport {\n  ApplicationShell,\n  ILayoutRestorer,\n  JupyterLab,\n  JupyterLabPlugin\n} from '@jupyterlab/application';\n\nimport {\n  Clipboard,\n  InstanceTracker,\n  MainAreaWidget,\n  ToolbarButton\n} from '@jupyterlab/apputils';\n\nimport { IStateDB, PageConfig, PathExt, URLExt } from '@jupyterlab/coreutils';\n\nimport { IDocumentManager } from '@jupyterlab/docmanager';\n\nimport { DocumentRegistry } from '@jupyterlab/docregistry';\n\nimport {\n  FileBrowserModel,\n  FileBrowser,\n  IFileBrowserFactory\n} from '@jupyterlab/filebrowser';\n\nimport { Launcher } from '@jupyterlab/launcher';\n\nimport { Contents } from '@jupyterlab/services';\n\nimport { map, toArray } from '@phosphor/algorithm';\n\nimport { CommandRegistry } from '@phosphor/commands';\n\nimport { Menu } from '@phosphor/widgets';\n\n/**\n * The command IDs used by the file browser plugin.\n */\nnamespace CommandIDs {\n  export const copy = 'filebrowser:copy';\n\n  // For main browser only.\n  export const createLauncher = 'filebrowser:create-main-launcher';\n\n  export const cut = 'filebrowser:cut';\n\n  export const del = 'filebrowser:delete';\n\n  export const download = 'filebrowser:download';\n\n  export const duplicate = 'filebrowser:duplicate';\n\n  // For main browser only.\n  export const hideBrowser = 'filebrowser:hide-main';\n\n  export const navigate = 'filebrowser:navigate';\n\n  export const open = 'filebrowser:open';\n\n  export const openBrowserTab = 'filebrowser:open-browser-tab';\n\n  export const paste = 'filebrowser:paste';\n\n  export const rename = 'filebrowser:rename';\n\n  // For main browser only.\n  export const share = 'filebrowser:share-main';\n\n  // For main browser only.\n  export const copyPath = 'filebrowser:copy-path';\n\n  export const showBrowser = 'filebrowser:activate';\n\n  export const shutdown = 'filebrowser:shutdown';\n\n  // For main browser only.\n  export const toggleBrowser = 'filebrowser:toggle-main';\n}\n\n/**\n * The default file browser extension.\n */\nconst browser: JupyterLabPlugin<void> = {\n  activate: activateBrowser,\n  id: '@jupyterlab/filebrowser-extension:browser',\n  requires: [IFileBrowserFactory, ILayoutRestorer],\n  autoStart: true\n};\n\n/**\n * The default file browser factory provider.\n */\nconst factory: JupyterLabPlugin<IFileBrowserFactory> = {\n  activate: activateFactory,\n  id: '@jupyterlab/filebrowser-extension:factory',\n  provides: IFileBrowserFactory,\n  requires: [IDocumentManager, IStateDB]\n};\n\n/**\n * The file browser namespace token.\n */\nconst namespace = 'filebrowser';\n\n/**\n * Export the plugins as default.\n */\nconst plugins: JupyterLabPlugin<any>[] = [factory, browser];\nexport default plugins;\n\n/**\n * Activate the file browser factory provider.\n */\nfunction activateFactory(\n  app: JupyterLab,\n  docManager: IDocumentManager,\n  state: IStateDB\n): IFileBrowserFactory {\n  const { commands } = app;\n  const tracker = new InstanceTracker<FileBrowser>({ namespace });\n  const createFileBrowser = (\n    id: string,\n    options: IFileBrowserFactory.IOptions = {}\n  ) => {\n    const model = new FileBrowserModel({\n      manager: docManager,\n      driveName: options.driveName || '',\n      state: options.state === null ? null : options.state || state\n    });\n    const widget = new FileBrowser({\n      id,\n      model,\n      commands: options.commands || commands\n    });\n    const { registry } = docManager;\n\n    // Add a launcher toolbar item.\n    let launcher = new ToolbarButton({\n      className: 'jp-AddIcon',\n      onClick: () => {\n        return createLauncher(commands, widget);\n      },\n      tooltip: 'New Launcher'\n    });\n    launcher.addClass('jp-MaterialIcon');\n    widget.toolbar.insertItem(0, 'launch', launcher);\n\n    // Add a context menu handler to the file browser's directory listing.\n    let node = widget.node.getElementsByClassName('jp-DirListing-content')[0];\n    node.addEventListener('contextmenu', (event: MouseEvent) => {\n      event.preventDefault();\n      const model = widget.modelForClick(event);\n      const menu = createContextMenu(model, commands, registry);\n      menu.open(event.clientX, event.clientY);\n    });\n\n    // Track the newly created file browser.\n    tracker.add(widget);\n\n    return widget;\n  };\n  const defaultBrowser = createFileBrowser('filebrowser');\n\n  return { createFileBrowser, defaultBrowser, tracker };\n}\n\n/**\n * Activate the default file browser in the sidebar.\n */\nfunction activateBrowser(\n  app: JupyterLab,\n  factory: IFileBrowserFactory,\n  restorer: ILayoutRestorer\n): void {\n  const browser = factory.defaultBrowser;\n  const { commands, shell } = app;\n\n  // Let the application restorer track the primary file browser (that is\n  // automatically created) for restoration of application state (e.g. setting\n  // the file browser as the current side bar widget).\n  //\n  // All other file browsers created by using the factory function are\n  // responsible for their own restoration behavior, if any.\n  restorer.add(browser, namespace);\n\n  addCommands(app, factory.tracker, browser);\n\n  browser.title.label = 'Files';\n  shell.addToLeftArea(browser, { rank: 100 });\n\n  // If the layout is a fresh session without saved data, open file browser.\n  app.restored.then(layout => {\n    if (layout.fresh) {\n      commands.execute(CommandIDs.showBrowser, void 0);\n    }\n  });\n\n  Promise.all([app.restored, browser.model.restored]).then(() => {\n    function maybeCreate() {\n      // Create a launcher if there are no open items.\n      if (app.shell.isEmpty('main')) {\n        createLauncher(commands, browser);\n      }\n    }\n\n    // When layout is modified, create a launcher if there are no open items.\n    shell.layoutModified.connect(() => {\n      maybeCreate();\n    });\n    maybeCreate();\n  });\n}\n\n/**\n * Add the main file browser commands to the application's command registry.\n */\nfunction addCommands(\n  app: JupyterLab,\n  tracker: InstanceTracker<FileBrowser>,\n  browser: FileBrowser\n): void {\n  const getBrowserForPath = (path: string): FileBrowser => {\n    const driveName = app.serviceManager.contents.driveName(path);\n\n    if (driveName) {\n      let browserForPath = tracker.find(fb => fb.model.driveName === driveName);\n\n      if (!browserForPath) {\n        // warn that no filebrowser could be found for this driveName\n        console.warn(\n          `${CommandIDs.navigate} failed to find filebrowser for path: ${path}`\n        );\n        return;\n      }\n\n      return browserForPath;\n    }\n\n    // if driveName is empty, assume the main filebrowser\n    return browser;\n  };\n  const { commands } = app;\n\n  commands.addCommand(CommandIDs.del, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.delete();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-CloseIcon',\n    label: 'Delete',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.copy, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.copy();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-CopyIcon',\n    label: 'Copy',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.cut, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.cut();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-CutIcon',\n    label: 'Cut'\n  });\n\n  commands.addCommand(CommandIDs.download, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.download();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-DownloadIcon',\n    label: 'Download'\n  });\n\n  commands.addCommand(CommandIDs.duplicate, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.duplicate();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-CopyIcon',\n    label: 'Duplicate'\n  });\n\n  commands.addCommand(CommandIDs.hideBrowser, {\n    execute: () => {\n      if (!browser.isHidden) {\n        app.shell.collapseLeft();\n      }\n    }\n  });\n\n  commands.addCommand(CommandIDs.navigate, {\n    execute: args => {\n      const path = (args.path as string) || '';\n      const browserForPath = getBrowserForPath(path);\n      const services = app.serviceManager;\n      const localPath = services.contents.localPath(path);\n      const failure = (reason: any) => {\n        console.warn(`${CommandIDs.navigate} failed to open: ${path}`, reason);\n      };\n\n      return services.ready\n        .then(() => services.contents.get(path))\n        .then(value => {\n          const { model } = browserForPath;\n          const { restored } = model;\n\n          if (value.type === 'directory') {\n            return restored.then(() => model.cd(`/${localPath}`));\n          }\n\n          return restored\n            .then(() => model.cd(`/${PathExt.dirname(localPath)}`))\n            .then(() => commands.execute('docmanager:open', { path: path }));\n        })\n        .catch(failure);\n    }\n  });\n\n  commands.addCommand(CommandIDs.open, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (!widget) {\n        return;\n      }\n\n      return Promise.all(\n        toArray(\n          map(widget.selectedItems(), item => {\n            if (item.type === 'directory') {\n              return widget.model.cd(item.name);\n            }\n\n            return commands.execute('docmanager:open', { path: item.path });\n          })\n        )\n      );\n    },\n    iconClass: 'jp-MaterialIcon jp-OpenFolderIcon',\n    label: 'Open',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.openBrowserTab, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (!widget) {\n        return;\n      }\n\n      return Promise.all(\n        toArray(\n          map(widget.selectedItems(), item => {\n            return commands.execute('docmanager:open-browser-tab', {\n              path: item.path\n            });\n          })\n        )\n      );\n    },\n    iconClass: 'jp-MaterialIcon jp-AddIcon',\n    label: 'Open in New Browser Tab',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.paste, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.paste();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-PasteIcon',\n    label: 'Paste',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.rename, {\n    execute: args => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.rename();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-EditIcon',\n    label: 'Rename',\n    mnemonic: 0\n  });\n\n  commands.addCommand(CommandIDs.share, {\n    execute: () => {\n      const path = encodeURIComponent(browser.selectedItems().next().path);\n      const tree = PageConfig.getTreeUrl({ workspace: true });\n\n      Clipboard.copyToSystem(URLExt.join(tree, path));\n    },\n    isVisible: () => toArray(browser.selectedItems()).length === 1,\n    iconClass: 'jp-MaterialIcon jp-LinkIcon',\n    label: 'Copy Shareable Link'\n  });\n\n  commands.addCommand(CommandIDs.copyPath, {\n    execute: () => {\n      const item = browser.selectedItems().next();\n      if (!item) {\n        return;\n      }\n\n      Clipboard.copyToSystem(item.path);\n    },\n    isVisible: () => toArray(browser.selectedItems()).length === 1,\n    iconClass: 'jp-MaterialIcon jp-FileIcon',\n    label: 'Copy Path'\n  });\n\n  commands.addCommand(CommandIDs.showBrowser, {\n    execute: args => {\n      const path = (args.path as string) || '';\n      const browserForPath = getBrowserForPath(path);\n\n      // Check for browser not found\n      if (!browserForPath) {\n        return;\n      }\n      // Shortcut if we are using the main file browser\n      if (browser === browserForPath) {\n        app.shell.activateById(browser.id);\n        return;\n      } else {\n        const areas: ApplicationShell.Area[] = ['left', 'right'];\n        for (let area of areas) {\n          const it = app.shell.widgets(area);\n          let widget = it.next();\n          while (widget) {\n            if (widget.contains(browserForPath)) {\n              app.shell.activateById(widget.id);\n              return;\n            }\n            widget = it.next();\n          }\n        }\n      }\n    }\n  });\n\n  commands.addCommand(CommandIDs.shutdown, {\n    execute: () => {\n      const widget = tracker.currentWidget;\n\n      if (widget) {\n        return widget.shutdownKernels();\n      }\n    },\n    iconClass: 'jp-MaterialIcon jp-StopIcon',\n    label: 'Shutdown Kernel'\n  });\n\n  commands.addCommand(CommandIDs.toggleBrowser, {\n    execute: () => {\n      if (browser.isHidden) {\n        return commands.execute(CommandIDs.showBrowser, void 0);\n      }\n\n      return commands.execute(CommandIDs.hideBrowser, void 0);\n    }\n  });\n\n  commands.addCommand(CommandIDs.createLauncher, {\n    label: 'New Launcher',\n    execute: () => createLauncher(commands, browser)\n  });\n}\n\n/**\n * Create a context menu for the file browser listing.\n *\n * #### Notes\n * This function generates temporary commands with an incremented name. These\n * commands are disposed when the menu itself is disposed.\n */\nfunction createContextMenu(\n  model: Contents.IModel | undefined,\n  commands: CommandRegistry,\n  registry: DocumentRegistry\n): Menu {\n  const menu = new Menu({ commands });\n\n  // If the user did not click on any file, we still want to show\n  // paste as a possibility.\n  if (!model) {\n    menu.addItem({ command: CommandIDs.paste });\n    return menu;\n  }\n\n  menu.addItem({ command: CommandIDs.open });\n\n  const path = model.path;\n  if (model.type !== 'directory') {\n    const factories = registry.preferredWidgetFactories(path).map(f => f.name);\n    if (path && factories.length > 1) {\n      const command = 'docmanager:open';\n      const openWith = new Menu({ commands });\n      openWith.title.label = 'Open With';\n      factories.forEach(factory => {\n        openWith.addItem({ args: { factory, path }, command });\n      });\n      menu.addItem({ type: 'submenu', submenu: openWith });\n    }\n    menu.addItem({ command: CommandIDs.openBrowserTab });\n  }\n\n  menu.addItem({ command: CommandIDs.rename });\n  menu.addItem({ command: CommandIDs.del });\n  menu.addItem({ command: CommandIDs.cut });\n\n  if (model.type !== 'directory') {\n    menu.addItem({ command: CommandIDs.copy });\n  }\n\n  menu.addItem({ command: CommandIDs.paste });\n\n  if (model.type !== 'directory') {\n    menu.addItem({ command: CommandIDs.duplicate });\n    menu.addItem({ command: CommandIDs.download });\n    menu.addItem({ command: CommandIDs.shutdown });\n  }\n\n  menu.addItem({ command: CommandIDs.share });\n  menu.addItem({ command: CommandIDs.copyPath });\n\n  return menu;\n}\n\n/**\n * Create a launcher for a given filebrowser widget.\n */\nfunction createLauncher(\n  commands: CommandRegistry,\n  browser: FileBrowser\n): Promise<MainAreaWidget<Launcher>> {\n  const { model } = browser;\n\n  return commands\n    .execute('launcher:create', { cwd: model.path })\n    .then((launcher: MainAreaWidget<Launcher>) => {\n      model.pathChanged.connect(() => {\n        launcher.content.cwd = model.path;\n      }, launcher);\n      return launcher;\n    });\n}\n"]}